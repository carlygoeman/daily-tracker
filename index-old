<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<title>Daily Tracker</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
  body { background: #0f0f13; color: #fff; font-family: 'Inter', system-ui, sans-serif; min-height: 100vh; }
  #root { max-width: 480px; margin: 0 auto; padding: 0 16px 60px; }
  input[type="date"] { color-scheme: dark; }
  input:focus { outline: none; border-color: #7c3aed !important; }
  button:active { opacity: 0.7; }
  ::-webkit-scrollbar { width: 0; }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect } = React;

const defaultHabits = [
{ id: 1, name: â€œWorkoutâ€, emoji: â€œğŸ‹ï¸â€ },
{ id: 2, name: â€œMeditateâ€, emoji: â€œğŸ§˜â€ },
{ id: 3, name: â€œEarly proteinâ€, emoji: â€œğŸ¥©â€ },
{ id: 4, name: â€œNo alcoholâ€, emoji: â€œğŸš«ğŸ·â€ },
{ id: 5, name: â€œBed by 10â€, emoji: â€œğŸ˜´â€ },
];

const ratingLabels = { â€œ-2â€: â€œRoughâ€, â€œ-1â€: â€œMehâ€, â€œ0â€: â€œNeutralâ€, â€œ1â€: â€œPretty goodâ€, â€œ2â€: â€œAmazingâ€ };
const ratingEmoji = { â€œ-2â€: â€œğŸ˜â€, â€œ-1â€: â€œğŸ˜â€, â€œ0â€: â€œğŸ™‚â€, â€œ1â€: â€œğŸ˜Šâ€, â€œ2â€: â€œğŸŒŸâ€ };

function getTodayKey() { return new Date().toISOString().split(â€œTâ€)[0]; }

function App() {
const [habits, setHabits] = useState(() => { try { const v = localStorage.getItem(â€œdt_habitsâ€); return v ? JSON.parse(v) : defaultHabits; } catch(e) { return defaultHabits; } });
const [goalCount, setGoalCount] = useState(() => { try { const v = localStorage.getItem(â€œdt_goalâ€); return v ? JSON.parse(v) : 3; } catch(e) { return 3; } });
const [days, setDays] = useState(() => { try { const v = localStorage.getItem(â€œdt_daysâ€); return v ? JSON.parse(v) : {}; } catch(e) { return {}; } });
const [selectedDate, setSelectedDate] = useState(getTodayKey());
const [newHabit, setNewHabit] = useState(â€â€);
const [newTask, setNewTask] = useState(â€â€);
const [view, setView] = useState(â€œtodayâ€);

const today = getTodayKey();

useEffect(() => { localStorage.setItem(â€œdt_habitsâ€, JSON.stringify(habits)); }, [habits]);
useEffect(() => { localStorage.setItem(â€œdt_goalâ€, JSON.stringify(goalCount)); }, [goalCount]);
useEffect(() => { localStorage.setItem(â€œdt_daysâ€, JSON.stringify(days)); }, [days]);

function getDay(k) { return days[k] || { checks: {}, tasks: [], rating: null }; }

function toggleHabit(id) {
const d = getDay(selectedDate);
setDays(p => ({ â€¦p, [selectedDate]: { â€¦d, checks: { â€¦d.checks, [id]: !d.checks[id] } } }));
}

function setRating(val) {
const d = getDay(selectedDate);
setDays(p => ({ â€¦p, [selectedDate]: { â€¦d, rating: d.rating === val ? null : val } }));
}

function addTask() {
if (!newTask.trim()) return;
const d = getDay(selectedDate);
setDays(p => ({ â€¦p, [selectedDate]: { â€¦d, tasks: [â€¦d.tasks, { id: Date.now(), text: newTask.trim(), done: false }] } }));
setNewTask(â€â€);
}

function toggleTask(id) {
const d = getDay(selectedDate);
setDays(p => ({ â€¦p, [selectedDate]: { â€¦d, tasks: d.tasks.map(t => t.id === id ? { â€¦t, done: !t.done } : t) } }));
}

function removeTask(id) {
const d = getDay(selectedDate);
setDays(p => ({ â€¦p, [selectedDate]: { â€¦d, tasks: d.tasks.filter(t => t.id !== id) } }));
}

function addHabit() {
if (!newHabit.trim()) return;
setHabits(p => [â€¦p, { id: Date.now(), name: newHabit.trim(), emoji: â€œâœ“â€ }]);
setNewHabit(â€â€);
}

function removeHabit(id) { setHabits(p => p.filter(h => h.id !== id)); }

const day = getDay(selectedDate);
const checkedCount = habits.filter(h => day.checks[h.id]).length;
const progress = habits.length > 0 ? checkedCount / habits.length : 0;
const hitGoal = checkedCount >= goalCount;

const historyDays = Object.keys(days)
.filter(k => { const d = days[k]; return (d.checks && Object.values(d.checks).some(Boolean)) || d.rating != null; })
.sort((a, b) => b.localeCompare(a))
.slice(0, 30);

const S = {
header: { display: â€œflexâ€, justifyContent: â€œspace-betweenâ€, alignItems: â€œcenterâ€, padding: â€œ20px 0 12pxâ€ },
h1: { fontSize: 22, fontWeight: 700 },
tabRow: { display: â€œflexâ€, gap: 8 },
tab: (active) => ({ padding: â€œ6px 14pxâ€, borderRadius: 20, border: â€œnoneâ€, background: active ? â€œ#7c3aedâ€ : â€œ#1e1e2aâ€, color: â€œ#fffâ€, fontSize: 13, cursor: â€œpointerâ€, fontWeight: 600 }),
dateRow: { display: â€œflexâ€, alignItems: â€œcenterâ€, gap: 10, marginBottom: 20 },
dateInput: { background: â€œ#1e1e2aâ€, color: â€œ#aaaâ€, border: â€œ1px solid #2a2a3aâ€, borderRadius: 8, padding: â€œ8px 10pxâ€, fontSize: 14, flex: 1 },
todayBtn: { background: â€œ#7c3aedâ€, color: â€œ#fffâ€, border: â€œnoneâ€, borderRadius: 8, padding: â€œ8px 12pxâ€, fontSize: 13, cursor: â€œpointerâ€, fontWeight: 600, whiteSpace: â€œnowrapâ€ },
card: { background: â€œ#1e1e2aâ€, borderRadius: 14, padding: â€œ14px 16pxâ€, marginBottom: 16 },
cardMuted: { background: â€œ#1a1a24â€, borderRadius: 14, padding: â€œ14px 16pxâ€, marginBottom: 16, border: â€œ1px solid #2a2a3aâ€ },
label: { fontSize: 11, fontWeight: 700, color: â€œ#666â€, textTransform: â€œuppercaseâ€, letterSpacing: 1, marginBottom: 8 },
labelMuted: { fontSize: 11, fontWeight: 700, color: â€œ#555â€, textTransform: â€œuppercaseâ€, letterSpacing: 1, marginBottom: 10 },
progressRow: { display: â€œflexâ€, justifyContent: â€œspace-betweenâ€, alignItems: â€œcenterâ€, marginBottom: 8 },
progressTrack: { background: â€œ#0f0f13â€, borderRadius: 6, height: 8, overflow: â€œhiddenâ€ },
habitRow: { display: â€œflexâ€, alignItems: â€œcenterâ€, gap: 12, padding: â€œ14px 0â€, borderBottom: â€œ1px solid #1e1e2aâ€, cursor: â€œpointerâ€, userSelect: â€œnoneâ€, WebkitUserSelect: â€œnoneâ€ },
checkbox: (checked) => ({ width: 26, height: 26, borderRadius: 8, border: checked ? â€œnoneâ€ : â€œ2px solid #333â€, background: checked ? â€œ#7c3aedâ€ : â€œtransparentâ€, display: â€œflexâ€, alignItems: â€œcenterâ€, justifyContent: â€œcenterâ€, flexShrink: 0, transition: â€œall 0.15sâ€ }),
habitName: (checked) => ({ fontSize: 16, color: checked ? â€œ#aaaâ€ : â€œ#fffâ€, textDecoration: checked ? â€œline-throughâ€ : â€œnoneâ€, flex: 1, transition: â€œall 0.15sâ€ }),
removeBtn: { background: â€œnoneâ€, border: â€œnoneâ€, color: â€œ#333â€, fontSize: 16, cursor: â€œpointerâ€, padding: â€œ4px 6pxâ€ },
inputRow: { display: â€œflexâ€, gap: 8, marginTop: 10 },
input: { flex: 1, background: â€œ#1e1e2aâ€, border: â€œ1px solid #2a2a3aâ€, borderRadius: 8, color: â€œ#fffâ€, padding: â€œ10px 12pxâ€, fontSize: 14 },
inputMuted: { flex: 1, background: â€œ#0f0f13â€, border: â€œ1px solid #2a2a3aâ€, borderRadius: 8, color: â€œ#fffâ€, padding: â€œ8px 10pxâ€, fontSize: 13 },
addBtn: { background: â€œ#7c3aedâ€, border: â€œnoneâ€, borderRadius: 8, color: â€œ#fffâ€, padding: â€œ0 14pxâ€, fontSize: 18, cursor: â€œpointerâ€ },
addBtnMuted: { background: â€œ#333â€, border: â€œnoneâ€, borderRadius: 8, color: â€œ#aaaâ€, padding: â€œ0 12pxâ€, fontSize: 16, cursor: â€œpointerâ€ },
taskRow: { display: â€œflexâ€, alignItems: â€œcenterâ€, gap: 10, padding: â€œ8px 0â€ },
taskCheck: (done) => ({ width: 20, height: 20, borderRadius: 5, border: done ? â€œnoneâ€ : â€œ1.5px solid #444â€, background: done ? â€œ#555â€ : â€œtransparentâ€, display: â€œflexâ€, alignItems: â€œcenterâ€, justifyContent: â€œcenterâ€, cursor: â€œpointerâ€, flexShrink: 0 }),
taskText: (done) => ({ flex: 1, fontSize: 14, color: done ? â€œ#444â€ : â€œ#999â€, textDecoration: done ? â€œline-throughâ€ : â€œnoneâ€ }),
ratingRow: { display: â€œflexâ€, justifyContent: â€œspace-betweenâ€ },
ratingBtn: (val, active) => ({ flex: 1, padding: â€œ10px 0â€, background: active ? (val >= 1 ? â€œ#166534â€ : val === 0 ? â€œ#1e3a5fâ€ : â€œ#5f1e1eâ€) : â€œtransparentâ€, border: â€œ1px solid â€œ + (active ? (val >= 1 ? â€œ#4ade80â€ : val === 0 ? â€œ#60a5faâ€ : â€œ#f87171â€) : â€œ#2a2a3aâ€), borderRadius: 10, color: â€œ#fffâ€, cursor: â€œpointerâ€, display: â€œflexâ€, flexDirection: â€œcolumnâ€, alignItems: â€œcenterâ€, gap: 4, transition: â€œall 0.15sâ€, margin: â€œ0 2pxâ€ }),
};

return (
<div>
<div style={S.header}>
<h1 style={S.h1}>Daily Tracker</h1>
<div style={S.tabRow}>
<button onClick={() => setView(â€œtodayâ€)} style={S.tab(view === â€œtodayâ€)}>Today</button>
<button onClick={() => setView(â€œhistoryâ€)} style={S.tab(view === â€œhistoryâ€)}>History</button>
</div>
</div>

```
  {view === "today" ? (
    <>
      <div style={S.dateRow}>
        <input type="date" value={selectedDate} onChange={e => setSelectedDate(e.target.value)} style={S.dateInput} />
        {selectedDate !== today && <button onClick={() => setSelectedDate(today)} style={S.todayBtn}>Today</button>}
      </div>

      {/* Progress */}
      <div style={S.card}>
        <div style={S.progressRow}>
          <span style={{ fontSize: 13, color: "#aaa" }}>{checkedCount} / {habits.length} habits</span>
          <div style={{ display: "flex", alignItems: "center", gap: 6 }}>
            <span style={{ fontSize: 12, color: "#666" }}>Goal:</span>
            <button onClick={() => setGoalCount(Math.max(1, goalCount - 1))} style={{ background: "none", border: "none", color: "#7c3aed", fontSize: 18, cursor: "pointer", lineHeight: 1, padding: "0 4px" }}>âˆ’</button>
            <span style={{ fontSize: 14, color: hitGoal ? "#4ade80" : "#fff", fontWeight: 700, minWidth: 18, textAlign: "center" }}>{goalCount}</span>
            <button onClick={() => setGoalCount(Math.min(habits.length, goalCount + 1))} style={{ background: "none", border: "none", color: "#7c3aed", fontSize: 18, cursor: "pointer", lineHeight: 1, padding: "0 4px" }}>+</button>
          </div>
        </div>
        <div style={S.progressTrack}>
          <div style={{ height: "100%", width: `${progress * 100}%`, background: hitGoal ? "linear-gradient(90deg,#4ade80,#22c55e)" : "linear-gradient(90deg,#7c3aed,#a78bfa)", borderRadius: 6, transition: "width 0.3s ease" }} />
        </div>
        {hitGoal && <div style={{ marginTop: 6, fontSize: 12, color: "#4ade80", fontWeight: 600 }}>ğŸ¯ Goal hit!</div>}
      </div>

      {/* Habits */}
      <div style={{ marginBottom: 8 }}>
        <div style={S.label}>Habits</div>
        {habits.map(h => (
          <div key={h.id} onClick={() => toggleHabit(h.id)} style={S.habitRow}>
            <div style={S.checkbox(day.checks[h.id])}>
              {day.checks[h.id] && <span style={{ color: "#fff", fontSize: 14 }}>âœ“</span>}
            </div>
            <span style={S.habitName(day.checks[h.id])}>{h.emoji} {h.name}</span>
            <button onClick={e => { e.stopPropagation(); removeHabit(h.id); }} style={S.removeBtn}>Ã—</button>
          </div>
        ))}
        <div style={S.inputRow}>
          <input value={newHabit} onChange={e => setNewHabit(e.target.value)} onKeyDown={e => e.key === "Enter" && addHabit()} placeholder="Add a habit..." style={S.input} />
          <button onClick={addHabit} style={S.addBtn}>+</button>
        </div>
      </div>

      {/* Tasks */}
      <div style={{ ...S.cardMuted, marginTop: 20 }}>
        <div style={S.labelMuted}>Today's Tasks</div>
        {day.tasks.length === 0 && <div style={{ fontSize: 13, color: "#444", marginBottom: 6 }}>Nothing here yet</div>}
        {day.tasks.map(t => (
          <div key={t.id} style={S.taskRow}>
            <div onClick={() => toggleTask(t.id)} style={S.taskCheck(t.done)}>
              {t.done && <span style={{ color: "#aaa", fontSize: 11 }}>âœ“</span>}
            </div>
            <span style={S.taskText(t.done)}>{t.text}</span>
            <button onClick={() => removeTask(t.id)} style={{ ...S.removeBtn, fontSize: 14 }}>Ã—</button>
          </div>
        ))}
        <div style={{ ...S.inputRow, marginTop: 8 }}>
          <input value={newTask} onChange={e => setNewTask(e.target.value)} onKeyDown={e => e.key === "Enter" && addTask()} placeholder="Add a task..." style={S.inputMuted} />
          <button onClick={addTask} style={S.addBtnMuted}>+</button>
        </div>
      </div>

      {/* Rating */}
      <div style={S.card}>
        <div style={S.label}>How was your day?</div>
        <div style={S.ratingRow}>
          {[-2,-1,0,1,2].map(val => (
            <button key={val} onClick={() => setRating(val)} style={S.ratingBtn(val, day.rating === val)}>
              <span style={{ fontSize: 20 }}>{ratingEmoji[val]}</span>
              <span style={{ fontSize: 10, color: day.rating === val ? "#fff" : "#666" }}>{val > 0 ? "+" : ""}{val}</span>
            </button>
          ))}
        </div>
        {day.rating != null && <div style={{ marginTop: 8, fontSize: 13, color: "#aaa", textAlign: "center" }}>{ratingLabels[day.rating]}</div>}
      </div>
    </>
  ) : (
    <div>
      <div style={S.label}>Recent Days</div>
      {historyDays.length === 0 && <div style={{ fontSize: 14, color: "#444", textAlign: "center", padding: 40 }}>No history yet â€” start checking off habits!</div>}
      {historyDays.map(dk => {
        const d = days[dk];
        const checks = habits.filter(h => d.checks && d.checks[h.id]);
        const pct = habits.length > 0 ? checks.length / habits.length : 0;
        const isToday = dk === today;
        const date = new Date(dk + "T12:00:00");
        const label = isToday ? "Today" : date.toLocaleDateString("en", { weekday: "short", month: "short", day: "numeric" });
        return (
          <div key={dk} style={{ background: "#1e1e2a", borderRadius: 12, padding: "12px 14px", marginBottom: 8 }}>
            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 6 }}>
              <span style={{ fontSize: 13, color: isToday ? "#7c3aed" : "#aaa", fontWeight: isToday ? 700 : 500 }}>{label}</span>
              <div style={{ display: "flex", alignItems: "center", gap: 6 }}>
                {d.rating != null && <span style={{ fontSize: 16 }}>{ratingEmoji[d.rating]}</span>}
                <span style={{ fontSize: 12, color: checks.length >= goalCount ? "#4ade80" : "#666" }}>{checks.length}/{habits.length}</span>
              </div>
            </div>
            <div style={{ background: "#0f0f13", borderRadius: 4, height: 5, overflow: "hidden" }}>
              <div style={{ height: "100%", width: `${pct * 100}%`, background: pct >= goalCount / habits.length ? "#4ade80" : "#7c3aed", borderRadius: 4 }} />
            </div>
          </div>
        );
      })}
    </div>
  )}
</div>
```

);
}

ReactDOM.createRoot(document.getElementById(â€œrootâ€)).render(<App />);
</script>

</body>
</html>
